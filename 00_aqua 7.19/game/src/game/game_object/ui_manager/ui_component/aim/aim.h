#pragma once

#include"../ui_component.h"

//照準
class CAim : public IUIComponent
{
public:
	//コンストラクタ
	CAim(aqua::IGameObject* parent);
	//デストラクタ
	~CAim() = default;

	//初期化
	void Initialize(void)override;
	//更新
	void Update(void)override;
	//描画
	void Draw(void)override;
	//解放
	void Finalize(void)override;

	//狙っている方向を取得
	aqua::CVector3 GetAimAngle(void);

private:
	//カメラからのレイの計算
	void SetAimRay(void);

	//レイが当たった位置を取得
	aqua::CVector3 CheckHitRay(void);

	//弾を飛ばす角度
	//飛ばす位置
	void GetBulletAngle(const aqua::CVector3& position);

	//射線上のとき色を変える
	void ChangeColor(void);


	aqua::CSprite m_Sprite;		//照準
	aqua::CVector2 m_Position;	//位置
	aqua::CVector3 m_DirectionAngle;	//弾を出す向き
	aqua::CVector3 m_StartRayPosition;	//レイの出始め位置
	aqua::CVector3 m_EndRayPosition;	//レイの終わる位置
	bool m_HitEnemyFlag;				//レイが敵と当たったかのフラグ

	static const aqua::CVector2 m_aim_position;		//位置
	static const aqua::CColor m_aim_default_color;	//デフォルトの色
	static const aqua::CColor m_aim_target_color;	//狙っているの色
	static const float m_ray_length;				//レイの長さ
	static const std::string m_hit_object_name;		//当たり判定を見るオブジェクトの名前
	static const int m_frame_index;					//フレームの番号
};